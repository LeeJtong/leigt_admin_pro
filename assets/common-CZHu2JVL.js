const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./home-B1ulDs2-.js","./vendor-BVr2knxT.js","./vendor-CZut4ZF1.css","./home-BfRrrj01.css","./HomePage-BwbmwTkq.js","./user-Df1FmICG.js","./shared/role/user-BiukHi76.js","./user-9gvhNm37.css","./role-MqNPRW4W.js","./auth-BQVSZJYY.js","./login-DUIkCPD6.js","./login-CE5fL9To.css","./about-DDrzO67F.js","./about-BmXBnv38.css"])))=>i.map(i=>d[i]);
import{k as o,l as P,s as S,m as d,n as R,p as T,N as f,q as b,t as u}from"./vendor-BVr2knxT.js";const k={path:"/",name:"Layout",redirect:"/",component:()=>o(()=>import("./home-B1ulDs2-.js").then(e=>e.i),__vite__mapDeps([0,1,2,3]),import.meta.url),meta:{role:["common","admin"]},children:[{path:"/",name:"HomePage",component:()=>o(()=>import("./HomePage-BwbmwTkq.js"),__vite__mapDeps([4,1,2]),import.meta.url),meta:{isShow:!0,title:"默认首页",parentRouter:"Layout"}},{path:"/project",name:"ProjectPage",component:()=>o(()=>import("./home-B1ulDs2-.js").then(e=>e.a),__vite__mapDeps([0,1,2,3]),import.meta.url),meta:{isShow:!0,title:"项目介绍",parentRouter:"Layout"}},{path:"/p",name:"ParentPage",meta:{isShow:!0,title:"父菜单",parentRouter:"Layout"},children:[{path:"/p/child1",name:"ChildPage1",meta:{isShow:!0,title:"子菜单1",parentRouter:"ParentPage"}},{path:"/p/child2",name:"ChildPage2",meta:{isShow:!0,title:"子菜单2",parentRouter:"ParentPage"}},{path:"/p/child3",name:"ChildPage3",meta:{isShow:!0,title:"子菜单3",parentRouter:"ParentPage"}}]},{path:"/user",name:"UserPage",component:()=>o(()=>import("./user-Df1FmICG.js"),__vite__mapDeps([5,1,2,6,7]),import.meta.url),meta:{title:"用户模块",isShow:!0,parentRouter:"Layout"}},{path:"/role",name:"RolePage",component:()=>o(()=>import("./role-MqNPRW4W.js"),__vite__mapDeps([8,1,2,6]),import.meta.url),meta:{title:"角色模块",isShow:!0,parentRouter:"Layout"}},{path:"/auth",name:"AuthPage",component:()=>o(()=>import("./auth-BQVSZJYY.js"),__vite__mapDeps([9,1,2]),import.meta.url),meta:{title:"权限模块",isShow:!0,parentRouter:"Layout"}}]},L=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"})),y={path:"/login",name:"login",component:()=>o(()=>import("./login-DUIkCPD6.js"),__vite__mapDeps([10,1,2,11]),import.meta.url),meta:{},children:[]},E=Object.freeze(Object.defineProperty({__proto__:null,default:y},Symbol.toStringTag,{value:"Module"}));function I(e,t,r){const s=[];for(;;){s.push({name:e,currentNameZH:r});const a=t.find(m=>m.name===e),c=t.find(m=>{var h;return m.name===((h=a==null?void 0:a.meta)==null?void 0:h.parentRouter)});if(c.meta.title){e=c.name,r=c.meta.title;continue}else break}return s.reverse()}const l=P();l.use(S);const v=d("SettingStore",{state:()=>({title:[]}),actions:{setTitle(e){this.title=e}}});function O(){return v(l)}const j={path:"/about",name:"about",component:()=>o(()=>import("./about-DDrzO67F.js"),__vite__mapDeps([12,1,2,13]),import.meta.url),meta:{},children:[]},g=Object.assign({"./modules/home.ts":L,"./modules/login.ts":E}),p=[];Object.keys(g).forEach(e=>{const t=g[e].default;p.push(t)});p.push(j);const n=R({history:T(),routes:p}),w=["/login","/about"],A=O(),U=e=>{var s;const t=(s=n.getRoutes().find(a=>a.name===e))==null?void 0:s.meta.title,r=I(e,n.getRoutes(),t);A.setTitle(r)};n.beforeEach(async(e,t,r)=>{f.start(),!!sessionStorage.getItem("userInfo")||w.includes(e.path)?r():r("/login"),U(e.name)});n.afterEach(e=>{f.done()});const _=e=>{let t="";switch(e){case 400:t="请求错误(400)";break;case 403:t="拒绝访问(403)";break;case 401:t="未授权(401)";break;case 500:t="服务器错误(500)";break;case 503:t="服务不可用(503)";break;default:t=`连接出错(${e})!`}return t},i=b.create({baseURL:void 0,timeout:15e3});i.interceptors.request.use(e=>e,e=>Promise.reject(e));i.interceptors.response.use(e=>{if(e.status===200){const t=e.data;return t.code!==0?(u({message:t.message,type:"error"}),Promise.reject(t)):t}return u({message:_(e.status),type:"error"}),e},e=>{const{response:t}=e;if(t)return u({message:_(t.status),type:"error"}),Promise.reject(t.data);u({message:"网络连接异常,请稍后再试!",type:"error"})});function D(e){return i({url:"/login",method:"POST",data:e})}function C(e){return i({url:"/getUserList",method:"get",data:e})}function V(e){return i({url:"/getUserList",method:"get",data:e})}const H=d("userInfo",{state:()=>({username:"大伟",accessToken:"",roles:["common"]}),getters:{},actions:{storeUserLogin(e){return console.log("调用"),D(e).then(t=>(console.log(t,"store的"),this.username=t.data.username,this.roles=t.data.roles,this.accessToken=t.data.accessToken,t))},logout(){sessionStorage.removeItem("userInfo"),this.accessToken="",n.push("/login")},storeRefreshUserInfo(){this.username==="大伟"&&this.accessToken!==""&&V({accessToken:this.accessToken}).then(e=>{this.username=e.data.username,this.roles=e.data.roles,this.accessToken=e.data.accessToken}).catch(()=>{this.accessToken=""})},test(e){console.log("测试",e)}},persist:{key:"userInfo",storage:sessionStorage,paths:["accessToken"]}});function q(){return H(l)}export{O as a,q as b,C as g,l as p,n as r,i as s,H as u};
