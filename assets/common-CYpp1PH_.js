const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-BooFlefH.js","assets/vendor-9-gncoeY.js","assets/vendor-CZut4ZF1.css","assets/home-xg3cCQ7H.css","assets/HomePage-DCzy2Fn3.js","assets/user-CoXk7Spa.js","assets/shared/role/user-s2pEX14G.js","assets/user-QqIuRxAG.css","assets/role-su-mqjHG.js","assets/auth-D8gplAsu.js","assets/auth-B5xTq0zo.css","assets/login-CzqVREL9.js","assets/login-BNAHkuPZ.css","assets/about-Bu9_-22q.js","assets/about-W4MnI3Lq.css"])))=>i.map(i=>d[i]);
import{p as o,q as P,s as S,t as d,v as R,x as T,N as f,y as L,z as u}from"./vendor-9-gncoeY.js";const b={path:"/",name:"Layout",redirect:"/",component:()=>o(()=>import("./home-BooFlefH.js").then(e=>e.i),__vite__mapDeps([0,1,2,3])),meta:{role:["common","admin"]},children:[{path:"/",name:"HomePage",component:()=>o(()=>import("./HomePage-DCzy2Fn3.js"),__vite__mapDeps([4,1,2])),meta:{isShow:!0,title:"默认首页",parentRouter:"Layout"}},{path:"/project",name:"ProjectPage",component:()=>o(()=>import("./home-BooFlefH.js").then(e=>e.a),__vite__mapDeps([0,1,2,3])),meta:{isShow:!0,title:"项目介绍",parentRouter:"Layout"}},{path:"/p",name:"ParentPage",meta:{isShow:!0,title:"父菜单",parentRouter:"Layout"},children:[{path:"/p/child1",name:"ChildPage1",meta:{isShow:!0,title:"子菜单1",parentRouter:"ParentPage"}},{path:"/p/child2",name:"ChildPage2",meta:{isShow:!0,title:"子菜单2",parentRouter:"ParentPage"}},{path:"/p/child3",name:"ChildPage3",meta:{isShow:!0,title:"子菜单3",parentRouter:"ParentPage"}}]},{path:"/user",name:"UserPage",component:()=>o(()=>import("./user-CoXk7Spa.js"),__vite__mapDeps([5,1,2,6,7])),meta:{title:"用户模块",isShow:!0,parentRouter:"Layout"}},{path:"/role",name:"RolePage",component:()=>o(()=>import("./role-su-mqjHG.js"),__vite__mapDeps([8,1,2,6])),meta:{title:"角色模块",isShow:!0,parentRouter:"Layout"}},{path:"/auth",name:"AuthPage",component:()=>o(()=>import("./auth-D8gplAsu.js").then(e=>e.i),__vite__mapDeps([9,1,2,10])),meta:{title:"权限模块",isShow:!0,parentRouter:"Layout"}},{path:"/button",name:"ButtonPage",component:()=>o(()=>import("./auth-D8gplAsu.js").then(e=>e.a),__vite__mapDeps([9,1,2,10])),meta:{title:"按钮封装",isShow:!0,parentRouter:"Layout"}},{path:"/sourceMap",name:"SourceMapPage",component:()=>o(()=>import("./auth-D8gplAsu.js").then(e=>e.b),__vite__mapDeps([9,1,2,10])),meta:{title:"错误源码映射",isShow:!0,parentRouter:"Layout"}}]},E=Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"})),k={path:"/login",name:"login",component:()=>o(()=>import("./login-CzqVREL9.js"),__vite__mapDeps([11,1,2,12])),meta:{},children:[]},y=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));function I(e,t,s){const r=[];for(;;){r.push({name:e,currentNameZH:s});const a=t.find(m=>m.name===e),c=t.find(m=>{var p;return m.name===((p=a==null?void 0:a.meta)==null?void 0:p.parentRouter)});if(c.meta.title){e=c.name,s=c.meta.title;continue}else break}return r.reverse()}const l=P();l.use(S);const v=d("SettingStore",{state:()=>({title:[]}),actions:{setTitle(e){this.title=e}}});function O(){return v(l)}const w={path:"/about",name:"about",component:()=>o(()=>import("./about-Bu9_-22q.js"),__vite__mapDeps([13,1,2,14])),meta:{},children:[]},_=Object.assign({"./modules/home.ts":E,"./modules/login.ts":y}),h=[];Object.keys(_).forEach(e=>{const t=_[e].default;h.push(t)});h.push(w);const n=R({history:T(),routes:h}),A=["/login","/about"],j=O(),D=e=>{var r;const t=(r=n.getRoutes().find(a=>a.name===e))==null?void 0:r.meta.title,s=I(e,n.getRoutes(),t);j.setTitle(s)};n.beforeEach(async(e,t,s)=>{f.start(),!!sessionStorage.getItem("userInfo")||A.includes(e.path)?s():s("/login"),D(e.name)});n.afterEach(e=>{f.done()});const g=e=>{let t="";switch(e){case 400:t="请求错误(400)";break;case 403:t="拒绝访问(403)";break;case 401:t="未授权(401)";break;case 500:t="服务器错误(500)";break;case 503:t="服务不可用(503)";break;default:t=`连接出错(${e})!`}return t},i=L.create({baseURL:void 0,timeout:15e3});i.interceptors.request.use(e=>e,e=>Promise.reject(e));i.interceptors.response.use(e=>{if(e.status===200){const t=e.data;return t.code!==0?(u({message:t.message,type:"error"}),Promise.reject(t)):t}return u({message:g(e.status),type:"error"}),e},e=>{const{response:t}=e;if(t)return u({message:g(t.status),type:"error"}),Promise.reject(t.data);u({message:"网络连接异常,请稍后再试!",type:"error"})});function U(e){return i({url:"/login",method:"POST",data:e})}function z(e){return i({url:"/getUserList",method:"get",data:e})}function V(e){return i({url:"/getUserList",method:"get",data:e})}const M=d("userInfo",{state:()=>({username:"GingTung",accessToken:"",roles:["common"]}),getters:{},actions:{storeUserLogin(e){return console.log("调用"),U(e).then(t=>(console.log(t,"store的"),this.username=t.data.username,this.roles=t.data.roles,this.accessToken=t.data.accessToken,t))},logout(){sessionStorage.removeItem("userInfo"),this.accessToken="",n.push("/login")},storeRefreshUserInfo(){this.username==="GingTung"&&this.accessToken!==""&&V({accessToken:this.accessToken}).then(e=>{this.username=e.data.username,this.roles=e.data.roles,this.accessToken=e.data.accessToken}).catch(()=>{this.accessToken=""})},test(e){console.log("测试",e)}},persist:{key:"userInfo",storage:sessionStorage,paths:["accessToken"]}});function C(){return M(l)}export{O as a,C as b,z as g,l as p,n as r,i as s,M as u};
